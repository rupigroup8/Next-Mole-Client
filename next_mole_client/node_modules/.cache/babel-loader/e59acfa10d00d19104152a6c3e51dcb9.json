{"ast":null,"code":"import _objectSpread from\"/Users/rgoren/Desktop/nextMoleAppClient/next_mole_client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/rgoren/Desktop/nextMoleAppClient/next_mole_client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/rgoren/Desktop/nextMoleAppClient/next_mole_client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/rgoren/Desktop/nextMoleAppClient/next_mole_client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/rgoren/Desktop/nextMoleAppClient/next_mole_client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/rgoren/Desktop/nextMoleAppClient/next_mole_client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'bootstrap/dist/css/bootstrap.min.css';import Button from'react-bootstrap/Button';import Container from'react-bootstrap/Container';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import User from'../images/User.png';import Form from'react-bootstrap/Form';//import styled from 'styled-components';\n//import net1 from '../images/net1.png';\n//import bg from '../images/bgHomePage.png';\nimport{withRouter}from'react-router-dom';import logo2 from'../images/logo2.png';import Nav from'../Components/Nav';import UploadJson from'./UploadJson';import UploadImage from'./UploadImage.jsx';import Category from'./Category';import PopNet from'./PopNet';import'../css/homecss.css';import Swal from'sweetalert2';import withReactContent from'sweetalert2-react-content';var MySwal=withReactContent(Swal);var currentCat=null;var HomePage=/*#__PURE__*/function(_Component){_inherits(HomePage,_Component);var _super=_createSuper(HomePage);function HomePage(props){var _this;_classCallCheck(this,HomePage);_this=_super.call(this,props);_this.componentDidMount=function(){_this.getCategories();};_this.getCategories=function(){var api=_this.apiUrl+\"CategoryAmount\";console.log(api);fetch(api,{method:'GET',//mode: 'no-cors',\nheaders:new Headers({'Content-Type':'application/json; charset=UTF-8'})}).then(function(res){console.log('res=',res);return res.json();}).then(function(result){console.log(result);if(result!=null){//this.setState({existingCategories: result}, ()=>this.getAmountFotCategory())\n_this.setState({existingCategories:result});}else{alert(\"categories wasn't found\");}},function(error){console.log(\"err=\",error);});};_this.handleSubjectChange=function(e){_this.setState({jsonSubject:e.target.value});};_this.handleDescriptionChange=function(e){_this.setState({jsonDescription:e.target.value});};_this.getJsonData=function(data){_this.setState({jsonRowData:JSON.parse(data)});};_this.getJsonImage=function(data){_this.setState({jsonImage:data});};_this.handleSubmit=function(e){e.preventDefault();localStorage.setItem('jsonRowData',JSON.stringify(_this.state.jsonRowData));// save the raw data from JSON to local storage\nif(e.target.elements.formSubject.value===''){MySwal.fire(\"Please insert subject\",\"\",\"warning\");}else if(e.target.elements.formDescription.value===''){MySwal.fire(\"Please insert description\",\"\",\"warning\");}else if(_this.state.jsonRowData===''){MySwal.fire(\"Please choose file with data\",\"\",\"warning\");}else{//UploadJson.saveJsonToDB();\n//this.child.getAlert();\n//this.child2.getAlert();\nvar str=e.target.elements.formSubject.value.replace(/ /g,\"_\");fetch(_this.apiUrl+'Tables',{//POST category\nmethod:'POST',body:JSON.stringify(str),//mode: 'no-cors',\nheaders:new Headers({'Content-type':'application/json; charset=UTF-8'})}).then(function(res){console.log('res=',res);return res.json();}).then(function(result){console.log(\"fetch POST= \",result);},function(error){console.log(\"err post=\",error);});var jsonDetails={subject:_this.state.jsonSubject,description:_this.state.jsonDescription,rawData:_this.state.jsonRowData,img:_this.state.jsonImage};localStorage.setItem('jsonDetails',JSON.stringify(jsonDetails));// save all details to local storage\nconsole.log(jsonDetails);_this.props.history.push({pathname:'/graph',state:{jsonDetails:jsonDetails}});}};_this.getNetForCat=function(category){console.log(\"inside get network\");currentCat=category;var api=_this.apiUrl+'getNetwork/?categoryNAME='+category;console.log(api);fetch(api,{method:'GET',//mode: 'no-cors',\nheaders:new Headers({'Content-Type':'application/json; charset=UTF-8'})}).then(function(res){console.log('res=',res);return res.json();}).then(function(result){console.log(result);if(result!=null){result.Nodes.map(function(item){return item.id=item.NodeNum;});result.Links.map(function(item){item.target=item.TargetNode;item.source=item.SourceNode;});console.log(result);_this.setState(function(prevState){return{networkToShow:_objectSpread(_objectSpread({},prevState.networkToShow),{},{nodes:result.Nodes,links:result.Links})};},function(){return _this.openModal();});}else{alert(\"network wasn't found\");}},function(error){console.log(\"err=\",error);});};var local=false;//let local = true;\n_this.apiUrl='https://localhost:44312/api/';if(!local){_this.apiUrl='http://proj.ruppin.ac.il/igroup8/prod/api/';}_this.state={jsonSubject:'',jsonDescription:'',jsonRowData:'',jsonImage:'',existingCategories:[],networkToShow:{nodes:['no nodes to show'],links:['no links to show']},open:false};_this.openModal=_this.openModal.bind(_assertThisInitialized(_this));_this.closeModal=_this.closeModal.bind(_assertThisInitialized(_this));return _this;}_createClass(HomePage,[{key:\"openModal\",value:function openModal(){console.log('inside open modal');this.setState({open:true});}},{key:\"closeModal\",value:function closeModal(){console.log('inside close modal');this.setState({open:false});}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Nav,null),/*#__PURE__*/React.createElement(Container,{fluid:true,className:\"jumbo\"},/*#__PURE__*/React.createElement(\"div\",{style:{overflow:\"hidden\",maxHeight:360,marginTop:60,maxWidth:\"100%\"},className:\"overlay\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{xs:6,style:{maxHeight:250}},/*#__PURE__*/React.createElement(\"h3\",{style:{opacity:0.9,color:'rgb(22, 25, 22)',marginTop:50,marginLeft:10,textAlign:'left'}},\"Welcome To The Mole's\"),/*#__PURE__*/React.createElement(\"h5\",{style:{opacity:0.9,color:'rgb(22, 25, 22)',marginLeft:10,textAlign:'left'}},\"Worlds Creation Site\"),/*#__PURE__*/React.createElement(\"p\",{style:{opacity:0.9,color:'rgb(22, 25, 22)',marginLeft:10,textAlign:'left'}},\"Here you can create your oun world by choice\")),/*#__PURE__*/React.createElement(Col,{xs:6},/*#__PURE__*/React.createElement(Row,{style:{marginTop:30}}))))),/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(PopNet,{isOpen:this.state.open,closeModal:this.closeModal,category:currentCat,data:this.state.networkToShow}))),/*#__PURE__*/React.createElement(Container,{style:{marginTop:30}},/*#__PURE__*/React.createElement(Row,{className:\"justify-content-center\"},this.state.existingCategories.map(function(item,i){return/*#__PURE__*/React.createElement(Category,{key:i,data:item,getNetwork:_this2.getNetForCat});})),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Form,{style:{width:'100%',marginTop:30},noValidate:true,onSubmit:function onSubmit(e){return _this2.handleSubmit(e);}},/*#__PURE__*/React.createElement(Form.Group,{as:Row,controlId:\"formSubject\"},/*#__PURE__*/React.createElement(Form.Label,{column:true,sm:\"2\"},\"Subject\"),/*#__PURE__*/React.createElement(Col,{sm:\"10\"},/*#__PURE__*/React.createElement(Form.Control,{required:true,name:\"subject\",type:\"text\",onChange:this.handleSubjectChange,placeholder:\"Add subject\"}))),/*#__PURE__*/React.createElement(Form.Group,{as:Row,controlId:\"formDescription\"},/*#__PURE__*/React.createElement(Form.Label,{column:true,sm:\"2\"},\"Description\"),/*#__PURE__*/React.createElement(Col,{sm:\"10\"},/*#__PURE__*/React.createElement(Form.Control,{required:true,type:\"text\",name:\"description\",onChange:this.handleDescriptionChange,placeholder:\"Add description\"}))),/*#__PURE__*/React.createElement(Form.Group,{as:Row,controlId:\"formPlaintextPassword\"},/*#__PURE__*/React.createElement(Col,{xs:6},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Form.Label,{column:true,sm:\"4\"},\"Data\"),/*#__PURE__*/React.createElement(Col,{sm:\"8\"},/*#__PURE__*/React.createElement(UploadJson,{sendJsonData:this.getJsonData,ref:function ref(instance){_this2.child=instance;}})))),/*#__PURE__*/React.createElement(Col,{xs:6},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Form.Label,{column:true,sm:\"4\"},\"Theme Image\"),/*#__PURE__*/React.createElement(Col,{sm:\"8\"},/*#__PURE__*/React.createElement(UploadImage,{sendJsonImage:this.getJsonImage,ref:function ref(instance2){_this2.child2=instance2;}}))))),/*#__PURE__*/React.createElement(Row,{style:{padding:100}},/*#__PURE__*/React.createElement(Col,{sx:12},/*#__PURE__*/React.createElement(Button,{style:{padding:'1.175rem 0.75rem',fontSize:'1.1rem',marginBottom:'2rem'},type:\"submit\",className:\"btn-info\"},\"Build network\")))))));}}]);return HomePage;}(Component);export default withRouter(HomePage);","map":{"version":3,"sources":["/Users/rgoren/Desktop/nextMoleAppClient/next_mole_client/src/Components/HomePage.jsx"],"names":["React","Component","Button","Container","Row","Col","User","Form","withRouter","logo2","Nav","UploadJson","UploadImage","Category","PopNet","Swal","withReactContent","MySwal","currentCat","HomePage","props","componentDidMount","getCategories","api","apiUrl","console","log","fetch","method","headers","Headers","then","res","json","result","setState","existingCategories","alert","error","handleSubjectChange","e","jsonSubject","target","value","handleDescriptionChange","jsonDescription","getJsonData","data","jsonRowData","JSON","parse","getJsonImage","jsonImage","handleSubmit","preventDefault","localStorage","setItem","stringify","state","elements","formSubject","fire","formDescription","str","replace","body","jsonDetails","subject","description","rawData","img","history","push","pathname","getNetForCat","category","Nodes","map","item","id","NodeNum","Links","TargetNode","source","SourceNode","prevState","networkToShow","nodes","links","openModal","local","open","bind","closeModal","overflow","maxHeight","marginTop","maxWidth","opacity","color","marginLeft","textAlign","i","width","instance","child","instance2","child2","padding","fontSize","marginBottom"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Button from 'react-bootstrap/Button';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport User from '../images/User.png'\nimport Form from 'react-bootstrap/Form';\n//import styled from 'styled-components';\n//import net1 from '../images/net1.png';\n//import bg from '../images/bgHomePage.png';\nimport { withRouter } from 'react-router-dom';\nimport logo2 from '../images/logo2.png';\nimport Nav from '../Components/Nav';\nimport UploadJson from './UploadJson';\nimport UploadImage from './UploadImage.jsx';\nimport Category from './Category';\nimport PopNet from './PopNet';\nimport '../css/homecss.css';\n\n\nimport Swal from 'sweetalert2';\nimport withReactContent from 'sweetalert2-react-content';\n\nconst MySwal = withReactContent(Swal)\n\nvar currentCat = null;\n\nclass HomePage extends Component {\n  constructor(props) {\n    super(props)\n\n    let local = false;\n    //let local = true;\n    this.apiUrl = 'https://localhost:44312/api/';\n    if (!local) {\n      this.apiUrl = 'http://proj.ruppin.ac.il/igroup8/prod/api/';\n    }\n    this.state = {\n\n      jsonSubject: '',\n      jsonDescription: '',\n      jsonRowData: '',\n      jsonImage: '',\n      existingCategories: [],\n      networkToShow: { nodes: ['no nodes to show'], links: ['no links to show'] },\n      open: false\n    }\n    this.openModal = this.openModal.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n  }\n\n  componentDidMount = () => {\n\n    this.getCategories();\n  }\n\n\n  getCategories = () => {\n    let api = this.apiUrl + \"CategoryAmount\";\n    console.log(api);\n    fetch(api, {\n      method: 'GET',\n      //mode: 'no-cors',\n      headers: new Headers({\n        'Content-Type': 'application/json; charset=UTF-8',\n      })\n    })\n      .then(res => {\n        console.log('res=', res);\n        return res.json();\n      })\n      .then(result => {\n        console.log(result);\n        if (result != null) {\n          //this.setState({existingCategories: result}, ()=>this.getAmountFotCategory())\n          this.setState({ existingCategories: result })\n\n        }\n        else {\n          alert(\"categories wasn't found\")\n        }\n      },\n        (error) => {\n          console.log(\"err=\", error);\n        });\n  }\n  handleSubjectChange = (e) => {\n    this.setState({ jsonSubject: e.target.value });\n\n  }\n  handleDescriptionChange = (e) => {\n    this.setState({ jsonDescription: e.target.value });\n\n  }\n  getJsonData = (data) => {\n    this.setState({\n      jsonRowData: JSON.parse(data)\n    })\n\n  }\n\n  getJsonImage = (data) => {\n    this.setState({\n      jsonImage: data\n    })\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    localStorage.setItem('jsonRowData', JSON.stringify(this.state.jsonRowData));    // save the raw data from JSON to local storage\n    if (e.target.elements.formSubject.value === '') {\n      MySwal.fire(\"Please insert subject\", \"\", \"warning\")\n\n    }\n    else if (e.target.elements.formDescription.value === '') {\n      MySwal.fire(\"Please insert description\", \"\", \"warning\")\n\n    }\n    else if (this.state.jsonRowData === '') {\n      MySwal.fire(\"Please choose file with data\", \"\", \"warning\")\n\n    }\n    else {\n      //UploadJson.saveJsonToDB();\n      //this.child.getAlert();\n      //this.child2.getAlert();\n      let str = e.target.elements.formSubject.value.replace(/ /g, \"_\");\n      fetch(this.apiUrl + 'Tables', {        //POST category\n        method: 'POST',\n        body: JSON.stringify(str),\n        //mode: 'no-cors',\n        headers: new Headers({\n          'Content-type': 'application/json; charset=UTF-8'\n        })\n      })\n        .then(res => {\n          console.log('res=', res);\n          return res.json()\n        })\n        .then(\n          (result) => {\n            console.log(\"fetch POST= \", result);\n          },\n          (error) => {\n            console.log(\"err post=\", error);\n          });\n\n      var jsonDetails = {\n        subject: this.state.jsonSubject,\n        description: this.state.jsonDescription,\n        rawData: this.state.jsonRowData,\n        img: this.state.jsonImage\n      }\n      localStorage.setItem('jsonDetails', JSON.stringify(jsonDetails));    // save all details to local storage\n      console.log(jsonDetails);\n      this.props.history.push({\n        pathname: '/graph',\n        state: {\n          jsonDetails: jsonDetails\n        }\n      });\n    }\n  }\n\n  getNetForCat = (category) => {\n    console.log(\"inside get network\");\n    currentCat = category;\n    let api = this.apiUrl + 'getNetwork/?categoryNAME=' + category;\n    console.log(api);\n    fetch(api, {\n      method: 'GET',\n      //mode: 'no-cors',\n      headers: new Headers({\n        'Content-Type': 'application/json; charset=UTF-8',\n      })\n    })\n      .then(res => {\n        console.log('res=', res);\n        return res.json();\n      })\n      .then(result => {\n        console.log(result);\n        if (result != null) {\n          result.Nodes.map((item)=>item.id=item.NodeNum);\n          result.Links.map((item)=>{item.target=item.TargetNode; item.source=item.SourceNode});\n          console.log(result)\n          this.setState(prevState => ({\n            networkToShow: {\n              ...prevState.networkToShow,\n              nodes: result.Nodes,\n              links: result.Links\n            }\n          }), ()=>this.openModal())\n        }\n        else {\n          alert(\"network wasn't found\")\n        }\n      },\n        (error) => {\n          console.log(\"err=\", error);\n        });\n  }\n\n  \n  openModal() {\n    console.log('inside open modal')\n    this.setState({ open: true });\n\n  }\n  \n\ncloseModal() {\n  console.log('inside close modal')\n  this.setState({ open: false });\n}\n  render() {\n    return (\n      <div>\n        <Nav />\n\n        <Container fluid className='jumbo'>\n          <div style={{ overflow: \"hidden\", maxHeight: 360, marginTop: 60, maxWidth: \"100%\" }} className='overlay'>\n            <Row>\n              <Col xs={6} style={{ maxHeight: 250 }}>\n                <h3 style={{ opacity: 0.9, color: 'rgb(22, 25, 22)', marginTop: 50, marginLeft: 10, textAlign: 'left' }}>Welcome To The Mole's</h3>\n                <h5 style={{ opacity: 0.9, color: 'rgb(22, 25, 22)', marginLeft: 10, textAlign: 'left' }}>Worlds Creation Site</h5>\n                <p style={{ opacity: 0.9, color: 'rgb(22, 25, 22)', marginLeft: 10, textAlign: 'left' }}>\n                  Here you can create your oun world by choice</p>\n              </Col>\n              <Col xs={6} >\n\n                <Row style={{ marginTop: 30 }} >\n                 {/*   <Col style={{}} className=\"temp\" md={6} xs={12}>\n                   <img alt='' style={{ maxHeight: 140, maxWidth: 140 }} src={logo2} /> \n                  </Col>\n                  <Col style={{ paddingRight: 10, marginTop: 10 }} className=\"temp\" xs={12} md={6}> <img alt='' style={{ zIndex: '100', Height: 120, maxWidth: 100 }} src={User} />\n                    <p>User Name</p>\n                  </Col>\n                  */}\n                </Row>\n              </Col>\n            </Row>\n          </div>\n        </Container>\n        <Container>\n          <Row>\n          <PopNet isOpen={this.state.open} closeModal={this.closeModal} category={currentCat} data={this.state.networkToShow}/>\n                    </Row>\n\n        </Container>\n        <Container style={{ marginTop: 30 }}>\n          <Row className='justify-content-center'>\n            {\n              this.state.existingCategories.map((item, i) => <Category key={i} data={item} getNetwork={this.getNetForCat}  />)\n\n            }\n          </Row>\n          <Row>\n            <Form style={{ width: '100%', marginTop: 30 }} noValidate onSubmit={(e) => this.handleSubmit(e)}>\n              <Form.Group as={Row} controlId=\"formSubject\">\n                <Form.Label column sm=\"2\">\n                  Subject\n              </Form.Label>\n                <Col sm=\"10\">\n                  <Form.Control required name='subject' type=\"text\" onChange={this.handleSubjectChange} placeholder=\"Add subject\" />\n                </Col>\n              </Form.Group>\n              <Form.Group as={Row} controlId=\"formDescription\">\n                <Form.Label column sm=\"2\">\n                  Description\n               </Form.Label>\n                <Col sm=\"10\">\n                  <Form.Control required type=\"text\" name='description' onChange={this.handleDescriptionChange} placeholder=\"Add description\" />\n                </Col>\n              </Form.Group>\n              <Form.Group as={Row} controlId=\"formPlaintextPassword\">\n                <Col xs={6}>\n                  <Row>\n                    <Form.Label column sm=\"4\">\n                      Data\n                  </Form.Label>\n                    <Col sm=\"8\">\n                      <UploadJson sendJsonData={this.getJsonData} ref={instance => { this.child = instance; }} />\n                    </Col>\n                  </Row>\n                </Col>\n                <Col xs={6}>\n                  <Row>\n                    <Form.Label column sm=\"4\">\n                      Theme Image\n                   </Form.Label>\n                    <Col sm=\"8\">\n                      <UploadImage sendJsonImage={this.getJsonImage} ref={instance2 => { this.child2 = instance2; }} />\n                    </Col>\n                  </Row>\n                </Col>\n              </Form.Group>\n              <Row style={{ padding: 100 }}>\n                <Col sx={12}>\n                  <Button style={{ padding: '1.175rem 0.75rem', fontSize: '1.1rem', marginBottom: '2rem' }} type=\"submit\" className=\"btn-info\">Build network</Button>\n                </Col>\n              </Row>\n            </Form>\n          </Row>\n        </Container>\n      </div>\n\n    )\n  }\n}\n\nexport default withRouter(HomePage);\n\n"]},"metadata":{},"sourceType":"module"}