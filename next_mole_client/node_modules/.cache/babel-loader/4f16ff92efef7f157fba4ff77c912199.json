{"ast":null,"code":"var fetchScript = require('../../lib/fetch-script')();\n\nvar LOADER_SRC = 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@r86/examples/js/loaders/GLTFLoader.js';\n\nvar loadLoader = function () {\n  var promise;\n  return function () {\n    promise = promise || fetchScript(LOADER_SRC);\n    return promise;\n  };\n}();\n/**\n * Legacy loader for glTF 1.0 models.\n * Asynchronously loads THREE.GLTFLoader from jsdelivr.\n */\n\n\nmodule.exports = AFRAME.registerComponent('gltf-model-legacy', {\n  schema: {\n    type: 'model'\n  },\n  init: function init() {\n    var _this = this;\n\n    this.model = null;\n    this.loader = null;\n    this.loaderPromise = loadLoader().then(function () {\n      _this.loader = new THREE.GLTFLoader();\n\n      _this.loader.setCrossOrigin('Anonymous');\n    });\n  },\n  update: function update() {\n    var _this2 = this;\n\n    var self = this;\n    var el = this.el;\n    var src = this.data;\n\n    if (!src) {\n      return;\n    }\n\n    this.remove();\n    this.loaderPromise.then(function () {\n      _this2.loader.load(src, function gltfLoaded(gltfModel) {\n        self.model = gltfModel.scene;\n        self.model.animations = gltfModel.animations;\n        el.setObject3D('mesh', self.model);\n        el.emit('model-loaded', {\n          format: 'gltf',\n          model: self.model\n        });\n      });\n    });\n  },\n  remove: function remove() {\n    if (!this.model) {\n      return;\n    }\n\n    this.el.removeObject3D('mesh');\n  }\n});","map":{"version":3,"sources":["/Users/rgoren/Desktop/nextMoleAppClient/next_mole_client/node_modules/aframe-extras/src/loaders/gltf-model-legacy.js"],"names":["fetchScript","require","LOADER_SRC","loadLoader","promise","module","exports","AFRAME","registerComponent","schema","type","init","model","loader","loaderPromise","then","THREE","GLTFLoader","setCrossOrigin","update","self","el","src","data","remove","load","gltfLoaded","gltfModel","scene","animations","setObject3D","emit","format","removeObject3D"],"mappings":"AAAA,IAAMA,WAAW,GAAGC,OAAO,CAAC,wBAAD,CAAP,EAApB;;AAEA,IAAMC,UAAU,GAAG,mFAAnB;;AAEA,IAAMC,UAAU,GAAI,YAAY;AAC9B,MAAIC,OAAJ;AACA,SAAO,YAAY;AACjBA,IAAAA,OAAO,GAAGA,OAAO,IAAIJ,WAAW,CAACE,UAAD,CAAhC;AACA,WAAOE,OAAP;AACD,GAHD;AAID,CANmB,EAApB;AAQA;;;;;;AAIAC,MAAM,CAACC,OAAP,GAAiBC,MAAM,CAACC,iBAAP,CAAyB,mBAAzB,EAA8C;AAC7DC,EAAAA,MAAM,EAAE;AAACC,IAAAA,IAAI,EAAE;AAAP,GADqD;AAG7DC,EAAAA,IAAI,EAAE,gBAAY;AAAA;;AAChB,SAAKC,KAAL,GAAa,IAAb;AACA,SAAKC,MAAL,GAAc,IAAd;AACA,SAAKC,aAAL,GAAqBX,UAAU,GAAGY,IAAb,CAAkB,YAAM;AAC3C,MAAA,KAAI,CAACF,MAAL,GAAc,IAAIG,KAAK,CAACC,UAAV,EAAd;;AACA,MAAA,KAAI,CAACJ,MAAL,CAAYK,cAAZ,CAA2B,WAA3B;AACD,KAHoB,CAArB;AAID,GAV4D;AAY7DC,EAAAA,MAAM,EAAE,kBAAY;AAAA;;AAClB,QAAMC,IAAI,GAAG,IAAb;AACA,QAAMC,EAAE,GAAG,KAAKA,EAAhB;AACA,QAAMC,GAAG,GAAG,KAAKC,IAAjB;;AAEA,QAAI,CAACD,GAAL,EAAU;AAAE;AAAS;;AAErB,SAAKE,MAAL;AAEA,SAAKV,aAAL,CAAmBC,IAAnB,CAAwB,YAAM;AAC5B,MAAA,MAAI,CAACF,MAAL,CAAYY,IAAZ,CAAiBH,GAAjB,EAAsB,SAASI,UAAT,CAAqBC,SAArB,EAAgC;AACpDP,QAAAA,IAAI,CAACR,KAAL,GAAae,SAAS,CAACC,KAAvB;AACAR,QAAAA,IAAI,CAACR,KAAL,CAAWiB,UAAX,GAAwBF,SAAS,CAACE,UAAlC;AACAR,QAAAA,EAAE,CAACS,WAAH,CAAe,MAAf,EAAuBV,IAAI,CAACR,KAA5B;AACAS,QAAAA,EAAE,CAACU,IAAH,CAAQ,cAAR,EAAwB;AAACC,UAAAA,MAAM,EAAE,MAAT;AAAiBpB,UAAAA,KAAK,EAAEQ,IAAI,CAACR;AAA7B,SAAxB;AACD,OALD;AAMD,KAPD;AAQD,GA7B4D;AA+B7DY,EAAAA,MAAM,EAAE,kBAAY;AAClB,QAAI,CAAC,KAAKZ,KAAV,EAAiB;AAAE;AAAS;;AAC5B,SAAKS,EAAL,CAAQY,cAAR,CAAuB,MAAvB;AACD;AAlC4D,CAA9C,CAAjB","sourcesContent":["const fetchScript = require('../../lib/fetch-script')();\n\nconst LOADER_SRC = 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@r86/examples/js/loaders/GLTFLoader.js';\n\nconst loadLoader = (function () {\n  let promise;\n  return function () {\n    promise = promise || fetchScript(LOADER_SRC);\n    return promise;\n  };\n}());\n\n/**\n * Legacy loader for glTF 1.0 models.\n * Asynchronously loads THREE.GLTFLoader from jsdelivr.\n */\nmodule.exports = AFRAME.registerComponent('gltf-model-legacy', {\n  schema: {type: 'model'},\n\n  init: function () {\n    this.model = null;\n    this.loader = null;\n    this.loaderPromise = loadLoader().then(() => {\n      this.loader = new THREE.GLTFLoader();\n      this.loader.setCrossOrigin('Anonymous');\n    });\n  },\n\n  update: function () {\n    const self = this;\n    const el = this.el;\n    const src = this.data;\n\n    if (!src) { return; }\n\n    this.remove();\n\n    this.loaderPromise.then(() => {\n      this.loader.load(src, function gltfLoaded (gltfModel) {\n        self.model = gltfModel.scene;\n        self.model.animations = gltfModel.animations;\n        el.setObject3D('mesh', self.model);\n        el.emit('model-loaded', {format: 'gltf', model: self.model});\n      });\n    });\n  },\n\n  remove: function () {\n    if (!this.model) { return; }\n    this.el.removeObject3D('mesh');\n  }\n});\n"]},"metadata":{},"sourceType":"script"}