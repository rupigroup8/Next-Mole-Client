{"ast":null,"code":"var vg = require('../../lib/hex-grid.min.js');\n\nvar defaultHexGrid = require('../../lib/default-hex-grid');\n/**\n * Hex grid.\n */\n\n\nmodule.exports.Primitive = AFRAME.registerPrimitive('a-hexgrid', {\n  defaultComponents: {\n    'hexgrid': {}\n  },\n  mappings: {\n    src: 'hexgrid.src'\n  }\n});\nmodule.exports.Component = AFRAME.registerComponent('hexgrid', {\n  dependencies: ['material'],\n  schema: {\n    src: {\n      type: 'asset'\n    }\n  },\n  init: function init() {\n    var _this = this;\n\n    var data = this.data;\n\n    if (data.src) {\n      fetch(data.src).then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        return _this.addMesh(json);\n      });\n    } else {\n      this.addMesh(defaultHexGrid);\n    }\n  },\n  addMesh: function addMesh(json) {\n    var grid = new vg.HexGrid();\n    grid.fromJSON(json);\n    var board = new vg.Board(grid);\n    board.generateTilemap();\n    this.el.setObject3D('mesh', board.group);\n    this.addMaterial();\n  },\n  addMaterial: function addMaterial() {\n    var materialComponent = this.el.components.material;\n    var material = (materialComponent || {}).material;\n    if (!material) return;\n    this.el.object3D.traverse(function (node) {\n      if (node.isMesh) {\n        node.material = material;\n      }\n    });\n  },\n  remove: function remove() {\n    this.el.removeObject3D('mesh');\n  }\n});","map":{"version":3,"sources":["/Users/rgoren/Desktop/nextMoleAppClient/next_mole_client/node_modules/aframe-extras/src/primitives/a-hexgrid.js"],"names":["vg","require","defaultHexGrid","module","exports","Primitive","AFRAME","registerPrimitive","defaultComponents","mappings","src","Component","registerComponent","dependencies","schema","type","init","data","fetch","then","response","json","addMesh","grid","HexGrid","fromJSON","board","Board","generateTilemap","el","setObject3D","group","addMaterial","materialComponent","components","material","object3D","traverse","node","isMesh","remove","removeObject3D"],"mappings":"AAAA,IAAMA,EAAE,GAAGC,OAAO,CAAC,2BAAD,CAAlB;;AACA,IAAMC,cAAc,GAAGD,OAAO,CAAC,4BAAD,CAA9B;AAEA;;;;;AAGAE,MAAM,CAACC,OAAP,CAAeC,SAAf,GAA2BC,MAAM,CAACC,iBAAP,CAAyB,WAAzB,EAAsC;AAC/DC,EAAAA,iBAAiB,EAAE;AACjB,eAAW;AADM,GAD4C;AAI/DC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,GAAG,EAAE;AADG;AAJqD,CAAtC,CAA3B;AASAP,MAAM,CAACC,OAAP,CAAeO,SAAf,GAA2BL,MAAM,CAACM,iBAAP,CAAyB,SAAzB,EAAoC;AAC7DC,EAAAA,YAAY,EAAE,CAAC,UAAD,CAD+C;AAE7DC,EAAAA,MAAM,EAAE;AACNJ,IAAAA,GAAG,EAAE;AAACK,MAAAA,IAAI,EAAE;AAAP;AADC,GAFqD;AAK7DC,EAAAA,IAAI,EAAE,gBAAY;AAAA;;AAChB,QAAMC,IAAI,GAAG,KAAKA,IAAlB;;AACA,QAAIA,IAAI,CAACP,GAAT,EAAc;AACZQ,MAAAA,KAAK,CAACD,IAAI,CAACP,GAAN,CAAL,CACGS,IADH,CACQ,UAACC,QAAD;AAAA,eAAcA,QAAQ,CAACC,IAAT,EAAd;AAAA,OADR,EAEGF,IAFH,CAEQ,UAACE,IAAD;AAAA,eAAU,KAAI,CAACC,OAAL,CAAaD,IAAb,CAAV;AAAA,OAFR;AAGD,KAJD,MAIO;AACL,WAAKC,OAAL,CAAapB,cAAb;AACD;AACF,GAd4D;AAe7DoB,EAAAA,OAAO,EAAE,iBAAUD,IAAV,EAAgB;AACvB,QAAME,IAAI,GAAG,IAAIvB,EAAE,CAACwB,OAAP,EAAb;AACAD,IAAAA,IAAI,CAACE,QAAL,CAAcJ,IAAd;AACA,QAAMK,KAAK,GAAG,IAAI1B,EAAE,CAAC2B,KAAP,CAAaJ,IAAb,CAAd;AACAG,IAAAA,KAAK,CAACE,eAAN;AACA,SAAKC,EAAL,CAAQC,WAAR,CAAoB,MAApB,EAA4BJ,KAAK,CAACK,KAAlC;AACA,SAAKC,WAAL;AACD,GAtB4D;AAuB7DA,EAAAA,WAAW,EAAE,uBAAY;AACvB,QAAMC,iBAAiB,GAAG,KAAKJ,EAAL,CAAQK,UAAR,CAAmBC,QAA7C;AACA,QAAMA,QAAQ,GAAG,CAACF,iBAAiB,IAAI,EAAtB,EAA0BE,QAA3C;AACA,QAAI,CAACA,QAAL,EAAe;AACf,SAAKN,EAAL,CAAQO,QAAR,CAAiBC,QAAjB,CAA0B,UAACC,IAAD,EAAU;AAClC,UAAIA,IAAI,CAACC,MAAT,EAAiB;AACfD,QAAAA,IAAI,CAACH,QAAL,GAAgBA,QAAhB;AACD;AACF,KAJD;AAKD,GAhC4D;AAiC7DK,EAAAA,MAAM,EAAE,kBAAY;AAClB,SAAKX,EAAL,CAAQY,cAAR,CAAuB,MAAvB;AACD;AAnC4D,CAApC,CAA3B","sourcesContent":["const vg = require('../../lib/hex-grid.min.js');\nconst defaultHexGrid = require('../../lib/default-hex-grid');\n\n/**\n * Hex grid.\n */\nmodule.exports.Primitive = AFRAME.registerPrimitive('a-hexgrid', {\n  defaultComponents: {\n    'hexgrid': {}\n  },\n  mappings: {\n    src: 'hexgrid.src'\n  }\n});\n\nmodule.exports.Component = AFRAME.registerComponent('hexgrid', {\n  dependencies: ['material'],\n  schema: {\n    src: {type: 'asset'}\n  },\n  init: function () {\n    const data = this.data;\n    if (data.src) {\n      fetch(data.src)\n        .then((response) => response.json())\n        .then((json) => this.addMesh(json));\n    } else {\n      this.addMesh(defaultHexGrid);\n    }\n  },\n  addMesh: function (json) {\n    const grid = new vg.HexGrid();\n    grid.fromJSON(json);\n    const board = new vg.Board(grid);\n    board.generateTilemap();\n    this.el.setObject3D('mesh', board.group);\n    this.addMaterial();\n  },\n  addMaterial: function () {\n    const materialComponent = this.el.components.material;\n    const material = (materialComponent || {}).material;\n    if (!material) return;\n    this.el.object3D.traverse((node) => {\n      if (node.isMesh) {\n        node.material = material;\n      }\n    });\n  },\n  remove: function () {\n    this.el.removeObject3D('mesh');\n  }\n});\n"]},"metadata":{},"sourceType":"script"}